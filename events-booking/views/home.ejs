<%- include('partials/header'); -%>

<div class="container_event">
    <div class="card">
        <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQqQ7As9ABrdyKDqHXtKQ15MmdHRBQ0IQXTZA7dmvX0_A&s" alt="Avatar" style="width:100%">
        <div class="container_info">
          <h4><b>John Doe</b></h4>
          <p>Architect & Engineer</p>
        </div>
      </div>
      <div class="card">
        <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQqQ7As9ABrdyKDqHXtKQ15MmdHRBQ0IQXTZA7dmvX0_A&s" alt="Avatar" style="width:100%">
        <div class="container_info">
          <h4><b>John Doe</b></h4>
          <p>Architect & Engineer</p>
        </div>
      </div>
      <div class="card">
        <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQqQ7As9ABrdyKDqHXtKQ15MmdHRBQ0IQXTZA7dmvX0_A&s" alt="Avatar" style="width:100%">
        <div class="container_info">
          <h4><b>John Doe</b></h4>
          <p>Architect & Engineer</p>
        </div>
      </div>
      <div class="card">
        <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQqQ7As9ABrdyKDqHXtKQ15MmdHRBQ0IQXTZA7dmvX0_A&s" alt="Avatar" style="width:100%">
        <div class="container_info">
          <h4><b>John Doe</b></h4>
          <p>Architect & Engineer</p>
        </div>
      </div>
      <div class="card">
        <img src="img_avatar.png" alt="Avatar" style="width:100%">
        <div class="container_info">
          <h4><b>John Doe</b></h4>
          <p>Architect & Engineer</p>
        </div>
      </div>
      <div class="card">
        <img src="img_avatar.png" alt="Avatar" style="width:100%">
        <div class="container_info">
          <h4><b>John Doe</b></h4>
          <p>Architect & Engineer</p>
        </div>
      </div>
      <div class="card">
        <img src="img_avatar.png" alt="Avatar" style="width:100%">
        <div class="container_info">
          <h4><b>John Doe</b></h4>
          <p>Architect & Engineer</p>
        </div>
      </div>
      <div class="card">
        <img src="img_avatar.png" alt="Avatar" style="width:100%">
        <div class="container_info">
          <h4><b>John Doe</b></h4>
          <p>Architect & Engineer</p>
        </div>
      </div>
      <div class="card">
        <img src="img_avatar.png" alt="Avatar" style="width:100%">
        <div class="container_info">
          <h4><b>John Doe</b></h4>
          <p>Architect & Engineer</p>
        </div>
      </div>
</div>



<script>

    $('.artist').click(function() {
        var id = $(this).data('id');
        window.location.href = '/artist/' + id;
    });

   // Funzione per gestire la ricerca in live search con jQuery UI autocomplete
   $(document).ready(function() {
        var artists = [];

        $.ajax({
            url: '/artists',
            type: 'GET',
            success: function(data) {
                console.log(data);
                data.artists.map(function(artist) {
                    artists.push({ id: artist._id, label: artist.artist_name }); // Utilizza 'label' invece di 'artist_name'
                });
                console.log(artists);

                // Inizializza l'autocomplete solo dopo che la chiamata AJAX ha avuto successo
                $("#searchInput").autocomplete({
                    source: artists,
                    minLength: 0,
                    select: function (event, ui) {
                        var artistId = ui.item.id;
                        window.location.href = '/artist?id=' + artistId;
                    }
                }).autocomplete("instance")._renderItem = function (ul, item) {
                    return $("<li class='ui-menu-item'>")
                        .append(item.label)
                        .appendTo(ul);
                };
            }
        });
});
</script>


<%- include('partials/footer'); -%>