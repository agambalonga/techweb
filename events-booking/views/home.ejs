<%- include('partials/header'); -%>

<div class="search-container">
    <input type="text" class="search-input" id="searchInput" placeholder="Search artist...">
</div>



<script>

    $('.artist').click(function() {
        var id = $(this).data('id');
        window.location.href = '/artist/' + id;
    });

   // Funzione per gestire la ricerca in live search con jQuery UI autocomplete
   $(document).ready(function() {
        var artists = [];

        $.ajax({
            url: '/artists',
            type: 'GET',
            success: function(data) {
                console.log(data);
                data.artists.map(function(artist) {
                    artists.push({ id: artist._id, label: artist.artist_name }); // Utilizza 'label' invece di 'artist_name'
                });
                console.log(artists);

                // Inizializza l'autocomplete solo dopo che la chiamata AJAX ha avuto successo
                $("#searchInput").autocomplete({
                    source: artists,
                    minLength: 0,
                    select: function (event, ui) {
                        var artistId = ui.item.id;
                        window.location.href = '/artist?id=' + artistId;
                    }
                }).autocomplete("instance")._renderItem = function (ul, item) {
                    return $("<li class='ui-menu-item'>")
                        .append(item.label)
                        .appendTo(ul);
                };
            }
        });
});



        /*
        var artists = [
            { value: '1', label: 'Artista 1', image: 'artista1.jpg' },
            { value: '2', label: 'Artista 2', image: 'artista2.jpg' },
            { value: '2', label: 'Artista 2', image: 'artista2.jpg' },
            { value: '2', label: 'Artista 2', image: 'artista2.jpg' }
            // Aggiungi altri artisti come necessario
        ]
        */
</script>
<%- include('partials/footer'); -%>